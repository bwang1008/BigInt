CXX = g++
CPPFLAGS = -I.
CXXFLAGS = -std=c++17 -O2 
WARNING_CXXFLAGS = -pedantic -Wall -Wextra -Wcast-align -Wcast-qual -Wctor-dtor-privacy -Wdisabled-optimization -Wformat=2 -Winit-self -Wlogical-op -Wmissing-include-dirs -Wnoexcept -Wold-style-cast -Woverloaded-virtual -Wredundant-decls -Wshadow -Wsign-conversion -Wsign-promo -Wstrict-null-sentinel -Wstrict-overflow=5 -Wswitch-default -Wundef -Werror -Wno-unused
ALL_CXXFLAGS = $(CXXFLAGS) $(WARNING_CXXFLAGS)

TARGET = testing

testing: big_int.o big_int_tester.o
	$(CXX) $(CPPFLAGS) $(ALL_CXXFLAGS) -o $(TARGET) big_int.o big_int_tester.o 

big_int.o: BigInt/src/big_int.cpp BigInt/src/big_int.hpp
	$(CXX) -c $(CPPFLAGS) $(ALL_CXXFLAGS) BigInt/src/big_int.cpp

big_int_tester.o: BigInt/tests/big_int_tester.cpp
	$(CXX) -c $(CPPFLAGS) $(ALL_CXXFLAGS) BigInt/tests/big_int_tester.cpp

.PHONY: clean
clean: 
	-@rm *.o testing 2>/dev/null || true
	@echo "Cleaned up object files and executable"
